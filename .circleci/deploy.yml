 version: 2.1

 orbs:
   heroku: circleci/heroku@x.y # Use the Heroku orb in your config

 workflows:
   heroku_deploy:
     jobs:
      steps:
       - run: source '.env' && echo $PRIVATE_KEY >> keys/private.pem
       - run: source '.env' && echo $PUBLIC_KEY >> keys/public.pem
       - run: source '.env' && echo $PRIVATER_KEY >> keys/privater.pem
       - run: source '.env' && echo $PUBLICR_KEY >> keys/publicr.pem

       - build
       - heroku/deploy-via-git:
           requires:
             - build # only run deploy-via-git job if the build job has completed
           filters:
             branches:
               only: circleci-project-setup # only run deploy-via-git job on master branch